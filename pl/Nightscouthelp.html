<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.5.2.2 (Linux)"/>
	<meta name="created" content="2023-02-21T11:28:36.352406009"/>
	<meta name="changed" content="2023-05-27T11:57:16.927859298"/>
	<style type="text/css">@page { size: 8.27in 11.69in; margin: 0.79in } h1 { margin-bottom: 0.08in; background: transparent } h1.western { font-family: "Liberation Sans", sans-serif; font-size: 18pt } h1.cjk { font-family: "Source Han Sans CN"; font-size: 18pt } h1.ctl { font-family: "Droid Sans Devanagari"; font-size: 18pt } p { margin-bottom: 0.1in; background: transparent } pre { font-family: "Liberation Mono", monospace; background: transparent }</style>
</head>
<body lang="pl-PL" dir="ltr"><h1 class="western">Web server</h1>
<p style="line-height: 100%; margin-bottom: 0in">Juggluco zawiera serwer sieciowy, za pomocą kt&oacute;rego inne aplikacje mogą odbierać wartości glukozy z Juggluco. Może być używany przez zegarki xDrip i niekt&oacute;re aplikacje Nightscout.</p>
<p style="line-height: 100%; margin-bottom: 0in">Korzystanie z aplikacji stworzonych do korzystania z serwera sieciowego xDrip jest stosunkowo łatwe. Wystarczy zaznaczyć opcję Aktywny. Następnie aplikacje mogą odbierać dane glukozy z hosta lokalnego (localhost) na porcie 17580. Adres URL serwera Nightscout: http://127.0.0.1:17580</p>
<p style="line-height: 100%; margin-bottom: 0in">Z opcji tej mogą korzystać też niekt&oacute;rzy &bdquo;followerzy&rdquo; - odbiorcy danych Nightscout. xDrip, Diabox i aplikacja <a href="https://github.com/dabear/FloatingGlucose/releases">Windows Floating Glucose</a> mogą być używane z http, gdy włączona jest opcja &quot;tylko lokalnie&quot;. Na MacOS to samo dotyczy aplikacji Nightscout Menu Bar, Gluco Status i Gluco Tracker (wszystkie w Apple Store). Http jest r&oacute;wnież wymagane tylko w przypadku aplikacji <a href="https://github.com/someoneAnyone/Nightscouter">Nightscouter</a> i <a href="https://github.com/jonfawcett/LoopFollow">LoopFollow</a> (IOS) oraz <a href="https://github.com/nightscout/nightguard">Nightguard</a> (IOS i WatchOS).</p>
<p style="line-height: 100%; margin-bottom: 0in">Jeśli chcesz uzyskać dostęp do Juggluco przez Internet, musisz przekierować port z modemu/routera. Zobacz:</p>
<ul>
	<li><p style="line-height: 100%; margin-bottom: 0in"><a href="https://www.makeuseof.com/tag/what-is-port-forwarding-and-how-can-it-help-me">https://www.makeuseof.com/tag/what-is-port-forwarding-and-how-can-it-help-me</a></p>
	<li><p style="line-height: 100%; margin-bottom: 0in"><a href="https://www.juggluco.nl/Juggluco/phones/index.html">https://www.juggluco.nl/Juggluco/phones/index.html</a></p>
	<li><p style="line-height: 100%; margin-bottom: 0in">Lewe środkowe menu -&gt; Klonowanie -&gt; Dodaj połączenie -&gt; Pomoc</p>
</ul>
<p style="line-height: 100%; margin-bottom: 0in">Inni followerzy w ramach Nightscout korzystają tylko z protokołu https, a to wymaga, aby Juggluco posiadało uwierzytelniony klucz SSL dla nazwy domeny używanej do uzyskania dostępu do Juggluco. Jeśli tw&oacute;j zewnętrzny adres IP ma powiązaną nazwę hosta, możesz uzyskać certyfikat za darmo za pośrednictwem <a href="https://certbot.eff.org/instructions">Certbot</a> lub <a href="https://www.sslforfree.com/">ZeroSSL</a>. Nie można z niej skorzystać, jeśli zewnętrzny adres IP nie ma nazwy hosta. Bezpłatną nazwę domeny można uzyskać na stronie <a href="https://www.freenom.com/">https://www.freenom.com</a>. Spr&oacute;bowałem, ale w ciągu kilku tygodni bez żadnego powiadomienia po prostu zabrali mi domenę, a kiedy pr&oacute;bowałem ją ponownie zarejestrować, miała cenę. Nazwę hosta można kupić za kilka euro rocznie (na przykład na stronie <a href="https://www.strato.nl/domeinnaam">https://www.strato.nl/domeinnaam)</a>.</p>
<p style="line-height: 100%; margin-bottom: 0in">Jeśli otrzymałeś pliki kluczy od organu SSL, musisz je przekazać Juggluco. Klucz prywatny można odczytać, naciskając<em>&quot;</em><em>Klucz prywatny</em>&quot;, a pełny łańcuch, naciskając<em>&quot;Pełny łańcuch</em>&quot;.</p>
<p style="line-height: 100%; margin-bottom: 0in">Od ZeroSSL.com otrzymałem trzy pliki: private.key, certificate.crt i ca_bundle.crt.</p>
<p style="line-height: 100%; margin-bottom: 0in">private.key to klucz prywatny, kt&oacute;ry należy podać Juggluco, naciskając <em>&quot;Klucz prywatny</em>&quot;.</p>
<p style="line-height: 100%; margin-bottom: 0in">Aby utworzyć pełny łańcuch, należy połączyć certificate.crt i ca_bundle.crt.</p>
<p style="line-height: 100%; margin-bottom: 0in">Linux:</p>
<pre style="margin-bottom: 0.2in">cat certificate.crt ca_bundle.crt &gt; fullchain.pem</pre><p style="line-height: 100%; margin-bottom: 0in">Windows cmd.com:</p>
<pre style="margin-bottom: 0.2in">copy certificate.crt + ca_bundle.crt fullchain.pem</pre><p style="line-height: 100%; margin-bottom: 0in">Windows Powershell:</p>
<p>cat certificate.crt &gt; fullchain.pem<br/> cat ca_bundle.crt &gt;&gt; fullchain.pem</p>
<p style="line-height: 100%; margin-bottom: 0in">Po użyciu Certbota znalazłem klucz prywatny w /etc/letsencrypt/live/myhostname/privkey.pem</p>
<p style="line-height: 100%; margin-bottom: 0in">a pełny łańcuch w /etc/letsencrypt/live/myhostname/fullchain.pem. <em>&quot;myhostname</em>&quot; to nazwa hosta, kt&oacute;rej użyłem.</p>
<p style="line-height: 100%; margin-bottom: 0in">Jeśli chcesz tylko wysłać wartości glukozy z jednego urządzenia z Androidem do drugiego, lepiej użyć funkcji <a href="https://www.juggluco.nl/Juggluco/index.html#mirror">klonowanie</a> w Juggluco (Lewe środkowe menu -&gt; Klonowanie).</p>
<p style="line-height: 100%; margin-bottom: 0in">Android Aps i Nsclient nie działają jako followerzy Juggluco, ale można wysyłać do nich wartości glukozy za pomocą transmisji xDrip (broadcast) w Juggluco (lewe menu -&gt; ustawienia -&gt; xDrip Broadcast).</p>
<p style="line-height: 100%; margin-bottom: 0in">SSL jest wymagany w przypadku aplikacji Diabetes:M, <a href="https://play.google.com/store/apps/details?id=se.cornixit.nightwatch">Nightwatch</a> i <a href="https://slingithub.github.io/CheckmateWeb">Checkmate</a> na Androida, Sugarmate (MacOS i IOS) oraz <a href="https://github.com/JohanDegraeve/xdripswift">Xdrip4ios</a>, Shuggah i Cockpit (IOS). Jako adres URL serwera Nightscout określ:</p>
<p><i>https://hostname:port</i></p>
<p><i>hostname</i> to nazwa hosta uwierzytelnionego klucza przekazanego do Juggluco, <i>port</i> to port przekierowany do portu określonego na tym ekranie (domyślnie: 17581).</p>
<p style="line-height: 100%; margin-bottom: 0in">Serwer sieciowy może być r&oacute;wnież uruchomiony na komputerze z systemem Linux. Będzie otrzymywać dane z <a href="https://www.juggluco.nl/Juggluco/index.html#mirror">połączenia w ramach klonowania</a> z Juggluco podłączonego do sensora: <a href="https://www.juggluco.nl/Juggluco/cmdline/index.html">https://www.juggluco.nl/Juggluco/cmdline</a>.</p>
<p style="line-height: 100%; margin-bottom: 0in">Inny telefon może połączyć się z tym serwerem za pośrednictwem połączenia w ramach klonowania lub jako follower Nightscout (na przykład na telefonie Iphone). Jeśli istnieje aplikacja Nightscout, kt&oacute;ra nie działa z tym serwerem sieciowym, proszę o informację. Może uda się sprawić, by działała z kilkoma zmianami. (Aplikacje IOS Nightscout i Nightscout X oraz aplikacja Android NSClient są specyficzne dla jednego konkretnego programu serwera Nightscout i nie będą działać z Juggluco)</p>
<p style="line-height: 100%; margin-bottom: 0in"><b>api_secret</b>: Określa, że followersi powinni ustawić element nagł&oacute;wka http <b>api_secret</b> na tę wartość. W Juggluco 4.9.1 lub nowszym testowanie tego hasła działa r&oacute;wnież, gdy followerzy używają tego hasła jako tokena Nightscout lub używają nagł&oacute;wka <b>api-secret</b> z zakodowanym hasłem SHA1.</p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Pokaż</strong>: Pokaż hasło.</p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Port</strong>: Określa port sieciowy używany do kontaktowania się z serwerem https. Domyślną wartością jest 17581.</p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Zapisz</strong>: Zapisz modyfikacje w polach API Secret lub Port.</p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Użyj SSL</strong>: użyj protokołu SSL (https). W przypadku SSL należy podać klucz prywatny i pełny łańcuch dla nazwy hosta używanej do kontaktu z tą usługą.</p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Klucz prywatny</strong>: wybierz plik zawierający klucz prywatny. Zobacz powyżej.</p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Pełny łańcuch</strong>: wybierz plik zawierający pełny łańcuch, patrz wyżej.</p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Tylko lokalnie</strong>: dostęp do serwera http można uzyskać tylko za pomocą hosta lokalnego (localhost). Nie dotyczy to protokołu https.</p>
<p style="line-height: 100%; margin-bottom: 0in"><b>Przekaż wartości</b>: umożliwia otrzymywanie wprowadzonych wartości za pomocą <a href="http://localhost:17580/api/v1/treatments?count=3">http://localhost:17580/api/v1/treatments?count=3</a>. (Dla każdej etykiety należy określić, co należy z nią zrobić. Wcześniej było to to samo, co w przypadku Libreview, jednak po wersji 4.18.0 można umieszczać etykiety w r&oacute;żnych kategoriach dla Libreview i tego serwera sieciowego) Za pośrednictwem tego interfejsu xDrip może otrzymywać wartości od Juggluco. W xDrip można to zrobić na dwa sposoby:</p>
<ol>
	<li><p style="line-height: 100%; margin-bottom: 0in">Jako <i>&quot;Sprzętowe źr&oacute;dło danych&quot;</i><span style="font-variant: normal"><span style="font-style: normal">,</span></span>  <i>&quot;Nightscout Follower&rdquo;</i><span style="font-variant: normal"> </span><span style="font-variant: normal"><span style="font-style: normal"> i podając jako &quot;Follow URL&quot;</span></span><i>,</i><span style="font-variant: normal"> </span><span style="font-variant: normal"><span style="font-style: normal"><a href="http://localhost:17580/api/v1/treatments?count=3">http://127.0.0.1:17580</a>, i zaznacz </span></span>&quot;<i>Download Treatments&rdquo; (pobierz zabiegi).</i><span style="font-variant: normal"></span></p>
	<li><p style="line-height: 100%; margin-bottom: 0in"><span style="font-variant: normal"><span style="font-style: normal">Weźmy na przykład inne sprzętowe źr&oacute;dło danych </span></span><i>Libre (patched app)</i><span style="font-variant: normal"> </span><span style="font-variant: normal"><span style="font-style: normal">i włączmy ustawienia -&gt; Przesyłanie do chmury -&gt; Nightscout Sync (REST-API). Wprowadź jako adres URL Base API, http://somekey@127.0.0.1:17580/api/v1/ i włącz &quot;</span></span><i> Download Treatments</i><span style="font-variant: normal"><span style="font-style: normal">&quot;. Przesyłanie do Juggluco jest niemożliwe, więc to tylko pobiera zabiegi i generuje kilka komunikat&oacute;w o błędach.</span></span></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0in"><span style="font-variant: normal"><span style="font-style: normal">Kiedy opcja &quot;</span></span><i>Tylko lokalnie</i><span style="font-variant: normal"><span style="font-style: normal">&quot; nie jest zaznaczona, można r&oacute;wnież użyć adresu IP sieci domowej telefonu, na kt&oacute;rym działa Juggluco, a po skonfigurowaniu modemu/routera do przekierowania na port 17580 tego telefonu, zewnętrznego adresu IP telefonu. Jeśli podałeś Juggluco klucz prywatny i pełny łańcuch dla nazwy hosta, za pomocą kt&oacute;rej można uzyskać dostęp do telefonu i włączyć </span></span><i>używaj SSL</i><span style="font-variant: normal"><span style="font-style: normal">, możesz r&oacute;wnież użyć tej nazwy hosta i portu określonego tutaj, używając https zamiast http.</span></span></p>
<p style="line-height: 100%; margin-bottom: 0in"><span style="font-variant: normal"><span style="font-style: normal">Jeśli chcesz przesłać zabiegi do Diabetes:M, możesz wysłać dane z Juggluco do Libreview i zapisać dane w Libreview za pomocą &quot;</span></span><i>Pobierz dane glukozy</i><span style="font-variant: normal"><span style="font-style: normal">&quot; i zaimportować te dane do Diabetes:M za pomocą Dane -&gt; Importuj z innych źr&oacute;deł -&gt; Freestyle lub uzyskać uwierzytelniony klucz dla zewnętrznej nazwy hosta telefonu i podać jako link zewnętrzne źr&oacute;dło, Nightscout z adresem URL, https://yourhostname:Port, gdzie nazwa hosta to nazwa hosta telefonu z uruchomionym Juggluco, dla kt&oacute;rego otrzymałeś uwierzytelniony klucz, a port to port, o kt&oacute;rym wspomniałeś tutaj. Wydaje się, że nie synchronizuje się to automatycznie, więc w Diabetes:M musisz sam nacisnąć Sync.</span></span></p>
<p style="line-height: 100%; margin-bottom: 0in"><strong>Aktywny</strong>: Serwer sieciowy jest uruchomiony.</p>
<p style="line-height: 100%; margin-bottom: 0in"><br/></p>
<p style="line-height: 100%; margin-bottom: 0in">Więcej informacji na temat poleceń serwera Nightscout/xDrip zaimplementowanych w Juggluco można znaleźć na stronie <a href="https://www.juggluco.nl/Juggluco/webserver.html">https://www.juggluco.nl/Juggluco/webserver.html</a></p>
</body>
</html>
